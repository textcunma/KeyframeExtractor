(function(){var e={7661:function(e,t,n){"use strict";var o=n(9242),r=n(3396);const i={class:"w-90 sm:w-1/2 m-10 mx-auto bg-white"};function c(e,t,n,o,c,a){const l=(0,r.up)("HeaderView"),s=(0,r.up)("MainView");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(l),(0,r._)("div",i,[(0,r.Wm)(s)])],64)}const a={class:"flex justify-center items-center bg-rose-500 h-20 shadow-xl"},l=(0,r._)("a",{class:"text-4xl font-bold text-zinc-900 font-serif"},"Keyframe Extractor",-1),s=[l];function u(e,t){return(0,r.wg)(),(0,r.iD)("header",a,s)}var d=n(89);const f={},m=(0,d.Z)(f,[["render",u]]);var p=m,h=n(7139);function g(e){const t=document.getElementById("inputBtn"),n=document.getElementById("displayVideo"),o=document.getElementById("result");0!=o.childNodes.length&&(o.innerHTML=""),console.log(n.src);const r=t.files;if(r.length<1)return;n.src&&(n.src="");const i=URL.createObjectURL(r[0]);n.hidden=!1,n.src=i,n.addEventListener("canplay",(function(){n.videoHeight>n.videoWidth?e.value=!1:e.value=!0}))}function v(){const e=document.getElementById("inputBtn");e.click()}var w={pushInputBtn:v,onFileSelected:g},y=n(6383),x=n.n(y);const b=[0],_=[256],C=[0,256];function M(){const e=document.getElementById("displayVideo"),t=document.getElementById("result"),n=.0333;0!=t.childNodes.length&&(t.innerHTML="");const o=e.getBoundingClientRect(),r=o.width,i=o.height,c=e.duration;console.log("duration: ",c),e.width=r,e.height=i,e.currentTime=0,e.controls=!1;let a=1,l=0;const s=new(x().Mat)(i,r,x().CV_8UC1);let u=new(x().Mat)(i,r,x().CV_8UC1);const d=setInterval((function(){if((e.ended||c-e.currentTime<.01)&&(clearInterval(d),e.controls=!0,s.delete()),e.readyState>3){console.log("state: ",e.readyState),console.log("second: ",e.currentTime);const o=document.createElement("canvas");o.width=r,o.height=i;const c=o.getContext("2d",{willReadFrequently:!0});c.drawImage(e,0,0,r,i);const d=new(x().Mat)(i,r,x().CV_8UC4);d.data.set(c.getImageData(0,0,r,i).data);const f=new(x().Mat)(i,r,x().CV_8UC1);x().cvtColor(d,f,x().COLOR_RGBA2GRAY);const m=new(x().MatVector);m.push_back(f),x().calcHist(m,b,new(x().Mat),s,_,C),x().normalize(s,s,1,0,x().NORM_L1),m.delete(),a>1?(l=x().compareHist(s,u,0),console.log("similarity: ",l)):u=s.clone(),(1==a||l<.7)&&(u=s.clone(),c.fillStyle="rgb(0, 0, 0)",c.fillRect(.9*r,.9*i,.95*r,.95*i),c.font="10px serif",c.fillStyle="rgb(255, 255, 255)",c.fillText(String(a),.92*r,.98*i),d.data.set(c.getImageData(0,0,r,i).data),x().imshow(o,d),t.appendChild(o)),d.delete(),f.delete(),e.currentTime+=n,a+=1}}),0);u.delete()}var O={name:"cvprocess",methods:{myMethod(){M()}}},B=n(4870);const I=(0,r._)("video",{id:"displayVideo",src:"",hidden:"",class:"mx-auto rounded-2xl",preload:"auto",controls:""},null,-1),V=[I],j=(0,r._)("p",{class:"text-xl text-white font-momo"},"select video",-1),k=(0,r._)("p",{class:"text-2xl font-momo tracking-wider"},"run",-1),E=[k],H=(0,r._)("div",{id:"result",class:"flex flex-row flex-wrap gap-1 lg:m-0 justify-center"},null,-1);var R=(0,r.aZ)({__name:"MainView",setup(e){const t=(0,B.iH)(!0),n=()=>{w.onFileSelected(t)},o=()=>{w.pushInputBtn()},i=()=>{O.methods.myMethod()};return(e,c)=>((0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",{id:"inputArea",class:(0,h.C_)([t.value?"landscape":"portrait"])},V,2),(0,r._)("button",{onMousedown:o,class:"flex justify-center items-center my-8 cursor-pointer bg-rose-700 hover:bg-rose-800 active:bg-rose-900 drop-shadow-lg hover:drop-shadow-md rounded-lg border-rose-300 w-80 h-10 mx-auto"},[j,(0,r._)("input",{type:"file",hidden:"",id:"inputBtn",accept:".mp4",onChange:n},null,32)],32),(0,r._)("button",{onMousedown:i,class:"flex justify-center items-center my-8 cursor-pointer bg-gradient-to-r from-indigo-500 via-rose-600 to-pink-500 drop-shadow-lg text-white hover:text-gray-200 hover:drop-shadow-md rounded-lg border-rose-300 w-80 h-10 mx-auto"},E,32),H],64))}});const T=R;var L=T,S=(0,r.aZ)({name:"App",components:{HeaderView:p,MainView:L}});const U=(0,d.Z)(S,[["render",c]]);var D=U;(0,o.ri)(D).mount("#app")},3499:function(){},2999:function(){},8300:function(){}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,o,r,i){if(!o){var c=1/0;for(u=0;u<e.length;u++){o=e[u][0],r=e[u][1],i=e[u][2];for(var a=!0,l=0;l<o.length;l++)(!1&i||c>=i)&&Object.keys(n.O).every((function(e){return n.O[e](o[l])}))?o.splice(l--,1):(a=!1,i<c&&(c=i));if(a){e.splice(u--,1);var s=r();void 0!==s&&(t=s)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[o,r,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,i,c=o[0],a=o[1],l=o[2],s=0;if(c.some((function(t){return 0!==e[t]}))){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(l)var u=l(n)}for(t&&t(o);s<c.length;s++)i=c[s],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(u)},o=self["webpackChunkkeyframe_extractor"]=self["webpackChunkkeyframe_extractor"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(7661)}));o=n.O(o)})();
//# sourceMappingURL=app.7b04b4f4.js.map