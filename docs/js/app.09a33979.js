(function(){var e={2127:function(e,t,n){"use strict";var o=n(9242),r=n(3396);const i={class:"w-90 sm:w-1/2 m-10 mx-auto bg-white"};function c(e,t,n,o,c,a){const d=(0,r.up)("HeaderView"),s=(0,r.up)("VideoView"),l=(0,r.up)("RunView");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(d),(0,r._)("div",i,[(0,r.Wm)(s),(0,r.Wm)(l)])],64)}const a={class:"flex justify-center items-center bg-rose-500 h-20 shadow-xl"},d=(0,r._)("a",{class:"text-4xl font-bold text-zinc-900 font-serif"},"Keyframe Extractor",-1),s=[d];function l(e,t){return(0,r.wg)(),(0,r.iD)("header",a,s)}var u=n(89);const f={},m=(0,u.Z)(f,[["render",l]]);var h=m;const g=(0,r.uE)('<div class="border-dashed border-4 rounded-2xl border-rose-300 w-80 h-45 mx-auto"><video id="displayVideo" src="" hidden class="mx-auto rounded-2xl" preload="auto" controls></video></div><div id="inputArea" class="flex justify-center items-center my-8 cursor-pointer bg-rose-700 hover:bg-rose-800 active:bg-rose-900 drop-shadow-lg hover:drop-shadow-md rounded-lg border-rose-300 w-80 h-10 mx-auto"><p class="text-xl text-white font-momo">select video</p><input type="file" hidden id="target" accept=".mp4"></div>',2);function p(e,t,n,o,r,i){return g}function v(){const e=document.querySelectorAll("#inputArea"),t=document.getElementById("target");e.forEach((e=>{e.addEventListener("click",(()=>{t.click()}))})),t.addEventListener("change",(function(){const e=document.getElementById("displayVideo"),t=document.getElementById("result");0!=t.childNodes.length&&(t.innerHTML=""),console.log(e.src);const n=this.files;if(n.length<1)return;e.src&&(e.src="");const o=URL.createObjectURL(n[0]);e.hidden=!1,e.src=o}))}var w={name:"fileinput",methods:{myMethod(){v()}}},y={name:"VideoView",mounted(){w.methods.myMethod()}};const x=(0,u.Z)(y,[["render",p]]);var b=x;const V=(0,r._)("div",{id:"runArea",class:"flex justify-center items-center my-8 cursor-pointer bg-gradient-to-r from-indigo-500 via-rose-600 to-pink-500 drop-shadow-lg text-white hover:text-gray-200 hover:drop-shadow-md rounded-lg border-rose-300 w-80 h-10 mx-auto"},[(0,r._)("p",{class:"text-2xl font-momo tracking-wider"},"run")],-1),_=(0,r._)("div",{id:"result",class:"flex flex-row flex-wrap gap-1 lg:m-0 m-10"},null,-1);function C(e,t,n,o,i,c){return(0,r.wg)(),(0,r.iD)(r.HY,null,[V,_],64)}var O=n(6383),E=n.n(O);const M=[0],k=[256],R=[0,256];function j(){const e=document.getElementById("displayVideo"),t=document.getElementById("result"),n=.0333;0!=t.childNodes.length&&(t.innerHTML="");const o=e.getBoundingClientRect(),r=o.width,i=o.height,c=e.duration;console.log("duration: ",c),e.width=r,e.height=i,e.currentTime=0,e.controls=!1;let a=1,d=0;const s=new(E().Mat)(i,r,E().CV_8UC1);let l=new(E().Mat)(i,r,E().CV_8UC1);const u=setInterval((function(){if((e.ended||c-e.currentTime<.01)&&(clearInterval(u),e.controls=!0,s.delete()),e.readyState>3){console.log("state: ",e.readyState),console.log("second: ",e.currentTime);const o=document.createElement("canvas");o.width=r,o.height=i;const c=o.getContext("2d",{willReadFrequently:!0});c.drawImage(e,0,0,r,i);const u=new(E().Mat)(i,r,E().CV_8UC4);u.data.set(c.getImageData(0,0,r,i).data);const f=new(E().Mat)(i,r,E().CV_8UC1);E().cvtColor(u,f,E().COLOR_RGBA2GRAY);const m=new(E().MatVector);m.push_back(f),E().calcHist(m,M,new(E().Mat),s,k,R),E().normalize(s,s,1,0,E().NORM_L1),m.delete(),a>1?(d=E().compareHist(s,l,0),console.log("similarity: ",d)):l=s.clone(),(1==a||d<.7)&&(l=s.clone(),c.fillStyle="rgb(0, 0, 0)",c.fillRect(.9*r,.9*i,.95*r,.95*i),c.font="10px serif",c.fillStyle="rgb(255, 255, 255)",c.fillText(String(a),.92*r,.98*i),u.data.set(c.getImageData(0,0,r,i).data),E().imshow(o,u),t.appendChild(o)),u.delete(),f.delete(),e.currentTime+=n,a+=1}}),0);l.delete()}function I(){const e=document.querySelectorAll("#runArea");e.forEach((e=>{e.addEventListener("click",j)}))}var A={name:"cvprocess",methods:{myMethod(){I()}}},L={name:"VideoView",mounted(){A.methods.myMethod()}};const T=(0,u.Z)(L,[["render",C]]);var H=T,B=(0,r.aZ)({name:"App",components:{HeaderView:h,VideoView:b,RunView:H}});const S=(0,u.Z)(B,[["render",c]]);var U=S;(0,o.ri)(U).mount("#app")},3499:function(){},2999:function(){},8300:function(){}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,o,r,i){if(!o){var c=1/0;for(l=0;l<e.length;l++){o=e[l][0],r=e[l][1],i=e[l][2];for(var a=!0,d=0;d<o.length;d++)(!1&i||c>=i)&&Object.keys(n.O).every((function(e){return n.O[e](o[d])}))?o.splice(d--,1):(a=!1,i<c&&(c=i));if(a){e.splice(l--,1);var s=r();void 0!==s&&(t=s)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[o,r,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,i,c=o[0],a=o[1],d=o[2],s=0;if(c.some((function(t){return 0!==e[t]}))){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(d)var l=d(n)}for(t&&t(o);s<c.length;s++)i=c[s],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(l)},o=self["webpackChunkkeyframe_extractor"]=self["webpackChunkkeyframe_extractor"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(2127)}));o=n.O(o)})();
//# sourceMappingURL=app.09a33979.js.map