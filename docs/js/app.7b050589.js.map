{"version":3,"file":"js/app.7b050589.js","mappings":"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","sources":["webpack://keyframe-extractor/./src/App.vue?323e","webpack://keyframe-extractor/./src/components/HeaderView.vue","webpack://keyframe-extractor/./src/components/HeaderView.vue?0a7c","webpack://keyframe-extractor/./src/fileinput.ts","webpack://keyframe-extractor/./src/cvprocess.ts","webpack://keyframe-extractor/./src/components/MainView.vue?aa7e","webpack://keyframe-extractor/./src/components/MainView.vue","webpack://keyframe-extractor/./src/App.vue?847a","webpack://keyframe-extractor/./src/App.vue","webpack://keyframe-extractor/./src/main.ts","webpack://keyframe-extractor/webpack/bootstrap","webpack://keyframe-extractor/webpack/runtime/chunk loaded","webpack://keyframe-extractor/webpack/runtime/compat get default export","webpack://keyframe-extractor/webpack/runtime/define property getters","webpack://keyframe-extractor/webpack/runtime/global","webpack://keyframe-extractor/webpack/runtime/hasOwnProperty shorthand","webpack://keyframe-extractor/webpack/runtime/jsonp chunk loading","webpack://keyframe-extractor/webpack/startup"],"sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"w-90 sm:w-1/2 m-10 mx-auto bg-white\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_HeaderView = _resolveComponent(\"HeaderView\")!\n  const _component_MainView = _resolveComponent(\"MainView\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(_component_HeaderView),\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createVNode(_component_MainView)\n    ])\n  ], 64))\n}","<template>\r\n     <header class = \"flex justify-center items-center bg-rose-500 h-20 shadow-xl\">\r\n          <a class = \"text-4xl font-bold text-zinc-900 font-serif\">Keyframe Extractor</a>\r\n     </header>\r\n</template>","import { render } from \"./HeaderView.vue?vue&type=template&id=af1a2256\"\nconst script = {}\n\nimport exportComponent from \"C:\\\\Users\\\\text\\\\Documents\\\\GitHub\\\\KeyframeExtractor\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","\r\nimport { Ref } from 'vue';\r\n\r\nfunction onFileSelected(landportFlg: Ref<boolean>) {\r\n     const inputFile = document.getElementById('inputBtn') as HTMLInputElement;\r\n     const video = document.getElementById('displayVideo') as HTMLVideoElement;\r\n     const result = document.getElementById(\"result\") as HTMLDivElement;\r\n\r\n     if (result.childNodes.length != 0) {\r\n          result.innerHTML = \"\";\r\n     }\r\n     \r\n     const fileList = inputFile.files as FileList;\r\n     if (fileList.length < 1){\r\n          return;\r\n     }\r\n     if (video.src) {\r\n          video.src = \"\";\r\n     }\r\n\r\n     const blobUrl = URL.createObjectURL(fileList[0]);\r\n     video.src = blobUrl;\r\n     video.hidden = false;\r\n     console.log(video.src);\r\n\r\n     video.addEventListener('durationchange', function() {\r\n          console.log(\"video.videoHeight: \", video.videoHeight);\r\n          console.log(\"video.videoWidth: \", video.videoWidth);\r\n          if (video.videoHeight > video.videoWidth) {\r\n               console.log(\"toFalse\");\r\n               console.log(\"flg: \", landportFlg.value);\r\n               landportFlg.value = false;\r\n          } else {\r\n               console.log(\"toTrue\");\r\n               console.log(\"flg: \", landportFlg.value);\r\n               landportFlg.value = true;\r\n          }\r\n     }, {once: true});\r\n}\r\n\r\nfunction pushInputBtn () {\r\n     // 入力ダイアログを起動\r\n     const inputFile = document.getElementById('inputBtn') as HTMLInputElement;\r\n     inputFile.click();\r\n}\r\n\r\n\r\nexport default {\r\n     pushInputBtn,\r\n     onFileSelected\r\n}","import cv, { Mat } from \"opencv-ts\";\r\n\r\nconst channels = [0];\r\nconst histSize = [256];\r\nconst ranges = [0, 256];\r\n\r\n// フレーム番号を描画\r\nfunction drawFrameNumber(width: number, height: number, frameNum: number, \r\n                         context: CanvasRenderingContext2D, src: Mat){\r\n     context.fillStyle = 'rgb(0, 0, 0)';\r\n     context.fillRect(width * 0.9, height * 0.9, \r\n                         width * 0.95, height * 0.95);\r\n     context.font = '10px serif';\r\n     context.fillStyle = 'rgb(255, 255, 255)';\r\n     context.fillText(String(frameNum), width * 0.92 , height * 0.98);\r\n     src.data.set(context.getImageData(0, 0, width, height).data);\r\n     return src\r\n}\r\n\r\n// ヒストグラムを計算\r\nfunction calcHistogram(width:number, height:number, src:Mat, hist: Mat) {\r\n     // RGBA -> GRAY\r\n     const gray: Mat = new cv.Mat(height, width, cv.CV_8UC1);\r\n     cv.cvtColor(src, gray, cv.COLOR_RGBA2GRAY);\r\n\r\n     // calc Histgram\r\n     const matVector = new cv.MatVector();\r\n     matVector.push_back(gray);          \r\n     cv.calcHist(matVector, channels, new cv.Mat(), hist, histSize, ranges);\r\n     cv.normalize(hist, hist, 1, 0, cv.NORM_L1);\r\n     matVector.delete();\r\n     gray.delete();\r\n\r\n     return hist;\r\n}\r\n\r\nfunction mainprocess(){\r\n     // 入力映像の有無を確認 | もし初期状態のhidden = trueであれば入力映像無し\r\n     const video = document.getElementById('displayVideo') as HTMLVideoElement;\r\n     if (video.hidden) {\r\n          alert(\"入力映像が見つかりません\");\r\n          throw new Error('no input video');\r\n     }\r\n\r\n     // ラジオボタン確認\r\n     // const radios = document.getElementsByName('style');\r\n     // const radiosLength = radios.length;\r\n     // let styleNum = 0;\r\n     // for (styleNum = 0; styleNum < radiosLength; styleNum++){\r\n     //      const radioInput = radios[styleNum] as HTMLInputElement;\r\n     //      if (radioInput.checked){\r\n     //           break;\r\n     //      }\r\n     // }\r\n\r\n     // もしresult欄に既に記述されているなら削除\r\n     const result = document.getElementById(\"result\") as HTMLDivElement;\r\n     if (result.childNodes.length != 0) {\r\n          result.innerHTML = \"\";\r\n     }     \r\n     \r\n     // 30 FPS(1s - 30frame)\r\n     const delay = 0.0333;\r\n\r\n     // 映像情報\r\n     const videoInfo = video.getBoundingClientRect();\r\n     const width = videoInfo.width;\r\n     const height = videoInfo.height;\r\n     const duration = video.duration;\r\n     // console.log(\"duration: \" ,duration);\r\n\r\n     // スマホ表示におけるバグ対策\r\n     video.play();\r\n     video.pause();\r\n\r\n     // 処理する前に映像を初期化 | 操作不能\r\n     video.currentTime = 0.0;\r\n     video.controls = false;\r\n     \r\n     let frameNum = 1;\r\n     let similarity = 0.0;\r\n\r\n     let hist: Mat = new cv.Mat(height, width, cv.CV_8UC1);\r\n     let hist2: Mat = new cv.Mat(height, width, cv.CV_8UC1);\r\n\r\n     const timeid = setInterval(function() {\r\n          if(video.ended || duration - video.currentTime < 0.01){\r\n               // console.log(hist);\r\n               // console.log(hist2);\r\n\r\n               // 結果に移動\r\n               result.scrollIntoView({\r\n                    behavior: \"smooth\",\r\n               });\r\n\r\n               hist.delete();\r\n               hist2.delete();\r\n               video.controls = true;\r\n               clearInterval(timeid);\r\n               return;\r\n          }\r\n          // 現在のフレームの読み込みが完了したら更新\r\n          if (video.readyState > 3) {\r\n               // console.log(\"state: \", video.readyState);\r\n               // console.log(\"second: \", video.currentTime);\r\n               \r\n               const canvas = document.createElement('canvas');\r\n               canvas.width = width;\r\n               canvas.height = height;\r\n               const context = canvas.getContext('2d', {willReadFrequently: true}) as CanvasRenderingContext2D;\r\n     \r\n               // link image\r\n               context.drawImage(video, 0, 0, width, height);\r\n                    \r\n               // set image\r\n               const src: Mat = new cv.Mat(height, width, cv.CV_8UC4);\r\n               src.data.set(context.getImageData(0, 0, width, height).data);\r\n\r\n               // calc histgoram\r\n               hist = calcHistogram(width, height, src, hist);\r\n\r\n               // ヒストグラム類似度を計算\r\n               if (frameNum > 1) {\r\n                    similarity = cv.compareHist(hist, hist2, 0);\r\n                    // console.log(\"similarity: \", similarity);\r\n               }\r\n     \r\n               // save image (1フレーム目 もしくは 類似度が0.7未満のフレーム)\r\n               if (frameNum < 2 || similarity < 0.70){\r\n                    // copy hist2 from hist\r\n                    hist2 = hist.clone();\r\n\r\n                    // draw frame number\r\n                    drawFrameNumber(width, height, frameNum, context, src);\r\n\r\n                    cv.imshow(canvas, src);\r\n                    result.appendChild(canvas);\r\n               }\r\n\r\n               // delete image\r\n               src.delete();\r\n               \r\n               // update\r\n               video.currentTime += delay;\r\n               frameNum += 1;\r\n          }\r\n     }, 0);  \r\n\r\n}\r\n\r\nexport default {\r\n     mainprocess\r\n}","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"video\", {\n  id: \"displayVideo\",\n  src: \"\",\n  hidden: \"\",\n  class: \"mx-auto rounded-2xl\",\n  preload: \"auto\",\n  controls: \"\"\n}, null, -1)\nconst _hoisted_2 = [\n  _hoisted_1\n]\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"p\", { class: \"text-xl text-white font-momo\" }, \"select video\", -1)\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"p\", { class: \"text-2xl font-momo tracking-wider\" }, \"run\", -1)\nconst _hoisted_5 = [\n  _hoisted_4\n]\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"div\", {\n  id: \"result\",\n  class: \"flex flex-row flex-wrap gap-1 lg:m-0 justify-center\"\n}, null, -1)\n\nimport fi from \"@/fileinput\";\r\n     import cp from \"@/cvprocess\";\r\n     import { ref } from 'vue';\r\n\r\n     \nexport default /*#__PURE__*/_defineComponent({\n  __name: 'MainView',\n  setup(__props) {\n\r\n     const landportFlg = ref(true);\r\n\r\n     // const styles = ref(\r\n     //      [\r\n     //           { name: 'Style 1', description: 'only Histogram', check: true },\r\n     //           { name: 'Style 2', description: 'Histgoram + Clustering', check: false } ,\r\n     //      ]\r\n     // );\r\n\r\n     const onFileSelected = () => {\r\n          fi.onFileSelected(landportFlg);\r\n     }\r\n\r\n     const pushInputBtn = () => {\r\n          fi.pushInputBtn();\r\n     }\r\n\r\n     const cvprocess = () => {\r\n          cp.mainprocess();\r\n     }\r\n\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", {\n      id: \"inputArea\",\n      class: _normalizeClass([ landportFlg.value ? 'landscape' : 'portrait'])\n    }, _hoisted_2, 2),\n    _createElementVNode(\"button\", {\n      onMousedown: pushInputBtn,\n      class: \"flex justify-center items-center my-8 cursor-pointer bg-rose-700 hover:bg-rose-800 active:bg-rose-900 drop-shadow-lg hover:drop-shadow-md rounded-lg border-rose-300 w-80 h-10 mx-auto\"\n    }, [\n      _hoisted_3,\n      _createElementVNode(\"input\", {\n        type: \"file\",\n        hidden: \"\",\n        id: \"inputBtn\",\n        accept: \".mp4\",\n        onChange: onFileSelected\n      }, null, 32)\n    ], 32),\n    _createElementVNode(\"button\", {\n      onMousedown: cvprocess,\n      class: \"flex justify-center items-center my-8 cursor-pointer bg-gradient-to-r from-indigo-500 via-rose-600 to-pink-500 drop-shadow-lg text-white hover:text-gray-200 hover:drop-shadow-md rounded-lg border-rose-300 w-80 h-10 mx-auto\"\n    }, _hoisted_5, 32),\n    _hoisted_6\n  ], 64))\n}\n}\n\n})","import script from \"./MainView.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./MainView.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__","\nimport { defineComponent } from 'vue';\nimport HeaderView from './components/HeaderView.vue';\nimport MainView from './components/MainView.vue';\n\nexport default defineComponent({\n  name: 'App',\n  components: {\n    HeaderView,\n    MainView,\n  }\n});\n","import { render } from \"./App.vue?vue&type=template&id=122359cb&ts=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"C:\\\\Users\\\\text\\\\Documents\\\\GitHub\\\\KeyframeExtractor\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\nimport './index.css'\n\ncreateApp(App).mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkkeyframe_extractor\"] = self[\"webpackChunkkeyframe_extractor\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(7661); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_hoisted_1","class","render","_ctx","_cache","$props","$setup","$data","$options","_component_HeaderView","_resolveComponent","_component_MainView","_openBlock","_createElementBlock","_Fragment","_createVNode","_createElementVNode","_hoisted_2","script","__exports__","onFileSelected","landportFlg","inputFile","document","getElementById","video","result","childNodes","length","innerHTML","fileList","files","src","blobUrl","URL","createObjectURL","hidden","console","log","addEventListener","videoHeight","videoWidth","value","once","pushInputBtn","click","channels","histSize","ranges","drawFrameNumber","width","height","frameNum","context","fillStyle","fillRect","font","fillText","String","data","set","getImageData","calcHistogram","hist","gray","cv","matVector","push_back","delete","mainprocess","alert","Error","delay","videoInfo","getBoundingClientRect","duration","play","pause","currentTime","controls","similarity","hist2","timeid","setInterval","ended","scrollIntoView","behavior","clearInterval","readyState","canvas","createElement","getContext","willReadFrequently","drawImage","clone","appendChild","id","preload","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_defineComponent","__name","setup","__props","ref","fi","cvprocess","cp","_normalizeClass","onMousedown","type","accept","onChange","defineComponent","name","components","HeaderView","MainView","createApp","App","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","Object","keys","every","key","splice","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","g","globalThis","this","Function","e","window","obj","prop","prototype","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","forEach","bind","push","__webpack_exports__"],"sourceRoot":""}